{
  "version": 3,
  "sources": ["../../@stacks/connect-react/src/react/components/connect/index.tsx", "../../@stacks/connect-react/src/react/components/connect/context.tsx", "../../@stacks/connect-react/src/react/hooks/use-connect.ts"],
  "sourcesContent": ["import React from 'react';\nimport { ConnectProvider } from './context';\nimport { AuthOptions } from '@stacks/connect';\n\n/**\n * Usage\n *\n *\n * const auth = {\n      manifestPath: '/static/manifest.json',\n      redirectTo: '/',\n      finished: ({userSession}) => {\n        doFinishSignIn();\n      },\n      authOrigin,\n      appDetails: {\n        name: 'Wink',\n        icon: 'url'\n      }\n    }\n *\n * <Connect authOptions={authOptions} />\n */\nconst Connect = ({ authOptions, children }: { authOptions: AuthOptions; children: any }) => {\n  return <ConnectProvider authOptions={authOptions}>{children}</ConnectProvider>;\n};\n\nexport { Connect };\n", "import React, { useReducer, createContext } from 'react';\nimport { AuthOptions, FinishedAuthData, UserSession } from '@stacks/connect';\n\nenum States {\n  UPDATE_AUTH_OPTIONS = 'data/update-auth-options',\n}\n\ntype Action = { type: States; payload?: any };\n\ntype Dispatch = (action: Action) => void;\n\ntype State = {\n  isOpen: boolean;\n  isAuthenticating: boolean;\n  authData?: FinishedAuthData;\n  authOptions: AuthOptions;\n  userSession?: UserSession;\n};\n\nconst initialState: State = {\n  isOpen: false,\n  isAuthenticating: false,\n  authData: undefined,\n  userSession: undefined,\n  authOptions: {\n    redirectTo: '',\n    manifestPath: '',\n    onFinish: () => null,\n    authOrigin: undefined,\n    sendToSignIn: false,\n    appDetails: {\n      name: '',\n      icon: '',\n    },\n  },\n};\n\nconst connectReducer = (state: State, { type, payload }: { type: States; payload?: any }) => {\n  switch (type) {\n    case States.UPDATE_AUTH_OPTIONS: {\n      return {\n        ...state,\n        authOptions: {\n          ...state.authOptions,\n          ...payload,\n        },\n      };\n    }\n\n    default: {\n      throw new Error(`Unhandled action type: ${type}`);\n    }\n  }\n};\n\nconst ConnectContext = createContext<State>(initialState);\n\nconst ConnectDispatchContext = createContext<Dispatch | undefined>(undefined);\n\nconst ConnectProvider = ({\n  authOptions,\n  children,\n}: {\n  authOptions: AuthOptions;\n  children: any;\n}) => {\n  const [state, dispatch] = useReducer(connectReducer, initialState);\n\n  return (\n    <ConnectContext.Provider value={{ ...state, authOptions }}>\n      <ConnectDispatchContext.Provider value={dispatch}>{children}</ConnectDispatchContext.Provider>\n    </ConnectContext.Provider>\n  );\n};\n\nexport {\n  initialState,\n  connectReducer,\n  ConnectContext,\n  ConnectDispatchContext,\n  ConnectProvider,\n  States,\n};\n", "import {\n  authenticate,\n  AuthOptions,\n  ContractCallOptions,\n  ContractCallRegularOptions,\n  ContractCallSponsoredOptions,\n  ContractDeployOptions,\n  ContractDeployRegularOptions,\n  ContractDeploySponsoredOptions,\n  FinishedAuthData,\n  openContractCall,\n  openContractDeploy,\n  openProfileUpdateRequestPopup,\n  openPsbtRequestPopup,\n  openSignatureRequestPopup,\n  openSignTransaction,\n  openStructuredDataSignatureRequestPopup,\n  openSTXTransfer,\n  ProfileUpdateRequestOptions,\n  PsbtRequestOptions,\n  showBlockstackConnect,\n  SignatureRequestOptions,\n  SignTransactionOptions,\n  StacksProvider,\n  StructuredDataSignatureRequestOptions,\n  STXTransferOptions,\n  STXTransferRegularOptions,\n  STXTransferSponsoredOptions,\n} from '@stacks/connect';\nimport { useContext } from 'react';\nimport { ConnectContext, ConnectDispatchContext, States } from '../components/connect/context';\n\nconst useConnectDispatch = () => {\n  const dispatch = useContext(ConnectDispatchContext);\n  if (!dispatch) {\n    throw new Error('This must be used within the ConnectProvider component.');\n  }\n  return dispatch;\n};\n\nexport const useConnect = () => {\n  // todo: add custom provider injection in connect context\n  const { isOpen, isAuthenticating, authData, authOptions, userSession } =\n    useContext(ConnectContext);\n\n  const dispatch = useConnectDispatch();\n\n  const doUpdateAuthOptions = (payload: Partial<AuthOptions>) => {\n    return dispatch({ type: States.UPDATE_AUTH_OPTIONS, payload });\n  };\n\n  /**\n   *\n   * @param signIn Whether the user should be sent to sign in\n   * @param options\n   */\n  const doOpenAuth = (\n    signIn?: boolean,\n    options?: Partial<AuthOptions>,\n    provider?: StacksProvider\n  ) => {\n    if (signIn) {\n      const _options: AuthOptions = {\n        ...authOptions,\n        ...options,\n        onFinish: (payload: FinishedAuthData) => {\n          authOptions.onFinish?.(payload);\n        },\n        sendToSignIn: true,\n      };\n      void authenticate(_options, provider);\n      return;\n    } else {\n      void showBlockstackConnect({\n        ...authOptions,\n        sendToSignIn: false,\n      });\n    }\n\n    if (authOptions) doUpdateAuthOptions(authOptions);\n  };\n\n  const doAuth = (options: Partial<AuthOptions> = {}, provider?: StacksProvider) => {\n    void authenticate(\n      {\n        ...authOptions,\n        ...options,\n        onFinish: (payload: FinishedAuthData) => {\n          authOptions.onFinish?.(payload);\n        },\n      },\n      provider\n    );\n  };\n\n  function doContractCall(\n    options: ContractCallOptions | ContractCallRegularOptions | ContractCallSponsoredOptions,\n    provider?: StacksProvider\n  ) {\n    return openContractCall(\n      {\n        ...options,\n        authOrigin: authOptions.authOrigin,\n        appDetails: authOptions.appDetails,\n      },\n      provider\n    );\n  }\n\n  function doContractDeploy(\n    options: ContractDeployOptions | ContractDeployRegularOptions | ContractDeploySponsoredOptions,\n    provider?: StacksProvider\n  ) {\n    return openContractDeploy(\n      {\n        ...options,\n        authOrigin: authOptions.authOrigin,\n        appDetails: authOptions.appDetails,\n      },\n      provider\n    );\n  }\n\n  function doSTXTransfer(\n    options: STXTransferOptions | STXTransferRegularOptions | STXTransferSponsoredOptions,\n    provider?: StacksProvider\n  ) {\n    return openSTXTransfer(\n      {\n        ...options,\n        authOrigin: authOptions.authOrigin,\n        appDetails: authOptions.appDetails,\n      },\n      provider\n    );\n  }\n\n  function doProfileUpdate(options: ProfileUpdateRequestOptions, provider?: StacksProvider) {\n    return openProfileUpdateRequestPopup(\n      {\n        ...options,\n        authOrigin: authOptions.authOrigin,\n        appDetails: authOptions.appDetails,\n      },\n      provider\n    );\n  }\n\n  function doSignTransaction(options: SignTransactionOptions, provider?: StacksProvider) {\n    return openSignTransaction(\n      {\n        ...options,\n        authOrigin: authOptions.authOrigin,\n        appDetails: authOptions.appDetails,\n      },\n      provider\n    );\n  }\n\n  function sign(options: SignatureRequestOptions, provider?: StacksProvider) {\n    return openSignatureRequestPopup(\n      {\n        ...options,\n        authOrigin: authOptions.authOrigin,\n        appDetails: authOptions.appDetails,\n      },\n      provider\n    );\n  }\n\n  function signStructuredData(\n    options: StructuredDataSignatureRequestOptions,\n    provider?: StacksProvider\n  ) {\n    return openStructuredDataSignatureRequestPopup(\n      {\n        ...options,\n        authOrigin: authOptions.authOrigin,\n        appDetails: authOptions.appDetails,\n      },\n      provider\n    );\n  }\n\n  function signPsbt(options: PsbtRequestOptions, provider?: StacksProvider) {\n    return openPsbtRequestPopup(\n      {\n        ...options,\n        authOrigin: authOptions.authOrigin,\n        appDetails: authOptions.appDetails,\n      },\n      provider\n    );\n  }\n\n  return {\n    isOpen,\n    isAuthenticating,\n    authData,\n    authOptions,\n    userSession,\n    doOpenAuth,\n    doAuth,\n    authenticate,\n    doContractCall,\n    doContractDeploy,\n    doSTXTransfer,\n    doSignTransaction,\n    doProfileUpdate,\n    sign,\n    signStructuredData,\n    signPsbt,\n  };\n};\n"],
  "mappings": "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",
  "names": ["S", "initialState", "connectReducer", "state", "type", "payload", "__spreadProps", "__spreadValues", "ConnectContext", "createContext", "ConnectDispatchContext", "ConnectProvider", "authOptions", "children", "dispatch", "useReducer", "React", "Connect", "useConnectDispatch", "useContext", "useConnect", "isOpen", "isAuthenticating", "authData", "userSession", "doUpdateAuthOptions", "doOpenAuth", "signIn", "options", "provider", "_options", "_a", "authenticate", "showBlockstackConnect", "doAuth", "doContractCall", "openContractCall", "doContractDeploy", "openContractDeploy", "doSTXTransfer", "openSTXTransfer", "doProfileUpdate", "openProfileUpdateRequestPopup", "doSignTransaction", "openSignTransaction", "sign", "openSignatureRequestPopup", "signStructuredData", "openStructuredDataSignatureRequestPopup", "signPsbt", "openPsbtRequestPopup"]
}
